<%inherit file="/media/base.html"/>

<%def name="page_title()">
Results!
</%def>

<%def name="page_header()">
hope you like it
</%def>

<%def name="page_name()">
% if media:
    ${media[0].title}
    <span style="font-size:.6em;">
        by ${media[0].user.handle}
        % if media[0].albums:
            (${', '.join([a.name for a in media[0].albums])})
        % endif
        % if media[0].tags:
            [${', '.join([t.name for t in media[0].tags])}]
        % endif
    </span>
% else:
    ${search}
% endif
</%def>

<style>
    .media_container { margin-bottom: 20px; }
    .media_container .media { }
    .media_container img { border: 1px solid black; }
    .comment { font-size: .8em; }
    .comment .rating { font-size: .5em; }
    .comment .handle { font-size: .8em; }
    form.add_comment { margin-top: 20px; }
</style>

% for m in media:
    <div class="media_block">
        <div class="media_container">
            % if m.extension.lower() in ('gif','jpeg','jpg','png'):
                <a href="/media/data/${m.id}">
                    <img class="media"
                         title="${m.title} by ${m.user.handle}"
                         src="/media/data/${m.id}?size=600"/>
                </a>
            % else:
                media extension unknown!
            % endif
        </div>
        % for c in m.comments:
            <div class="comment" title="${c.title or ''}">
                ${c.content or ''}
                <span class="rating">
                    ${(c.rating or 0) * '&hearts;'}
                </span>
                <span class="handle">
                    ${c.user.handle or ''}
                </span>
            </div>
        % endfor
        <form class="add_comment" method="POST" action="/comment/create/">
            add comment: <input type="text" name="content"/>
            <select name="rating">
                % for i in xrange(6):
                    <option value="${i}">${i * '&hearts;'}</option>
                % endfor
            </select>
            <input type="hidden" value="${m.id}" name="media_id"/>
            <input type="submit" value="2&cent;" name="action"/>
        </form>
    </div>
% endfor
